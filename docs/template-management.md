# テンプレート管理ガイド（運用・開発者向け）

このドキュメントは、AI-Toolboxプロジェクトのテンプレート追加・削除・管理の運用ルールをまとめたものです。エンドユーザー向けではなく、プロジェクトのメンテナー・コントリビューター向けのガイドです。

## テンプレートの追加手順

1. `templates/` ディレクトリ配下に新しいテンプレート用フォルダを作成します。
   例: `templates/my-template/`
2. テンプレートの内容（`package.json`、`README.md`、必要な設定ファイルやソースコード）を配置します。
3. 必要に応じて `README.md` や `docs/` にテンプレートの説明や使い方を追記してください。
4. テンプレート固有のルールやセットアップ手順がある場合は、そのテンプレートフォルダ内または `docs/` にドキュメントを追加してください。
5. テンプレートを追加したら、`km-create-project` コマンドで新テンプレートが選択できることを確認してください。

## テンプレートの削除手順

1. `templates/` 配下から該当テンプレートのフォルダを削除します。
2. 関連するドキュメント（`README.md` や `docs/` 内の説明など）から該当テンプレートの記述を削除または修正します。
3. `km-create-project` コマンドで削除したテンプレートが選択肢に表示されないことを確認してください。

## テンプレート運用フロー

1. テンプレートの追加・変更・削除は必ずPull Request（PR）で行うこと。
2. PR作成時は、該当テンプレートの説明・目的・主な変更点を明記する。
3. レビュワーは、テンプレートの構成・命名・依存関係・instructionsファイルの有無・内容を確認する。
4. 承認後、mainブランチへマージし、履歴を残す。
5. マージ後は、`km-create-project` コマンドで動作確認・テンプレート選択肢の反映を必ず行う。
6. 必要に応じて `memory_bank/activeContext.md` も更新し、作業履歴・運用状況を記録する。

## テンプレートルール追加・変更時の手順

1. ルールや運用方針を変更・追加する場合は、`.github/instructions/` 配下の該当Markdownファイル（例：`general.instructions.md`、`comment.instructions.md`）を編集または新規作成する。
2. ルール変更の理由・背景・適用範囲をPR本文に明記する。
3. 影響範囲のテンプレート（`templates/`配下）に対し、必要なinstructionsファイルの追加・修正を行う。
4. ルール変更後は、必ずレビュワーによる内容確認・合意を得る。
5. マージ後、`memory_bank/activeContext.md` にも変更内容を記録し、チーム全体で共有する。
6. ルール適用後は、既存テンプレートの整合性チェック・必要に応じた修正を実施する。

## テストフレームワーク運用ルール

- Web系テンプレート（Next.js等）はVitest/Playwrightを標準とする。
- React Nativeテンプレート（mobile-copilot等）はJestのみ許容し、Vitest/Playwrightは利用しない。
- テンプレートごとにテストフレームワークの選定理由・運用方針を明記すること。

## Hono利用ルール

- WebテンプレートでAPIルーティングやバックエンド機能を実装する場合、Hono（最新版）を推奨する。
- Honoのバージョンはテンプレートごとに`package.json`で明示し、メジャーアップデート時は互換性を必ず確認すること。
- バリデーションには`zod`と`@hono/zod-validator`を組み合わせて利用する。
- Honoのルーティング・ミドルウェア設計はKISS原則・型安全性を重視し、テストはVitestでユニットテスト、PlaywrightでE2Eテストを行う。
- Hono固有のセットアップや拡張がある場合は、テンプレートの`README.md`や`docs/`に必ず記載する。

## 設定ファイル・スクリプトの共通化方針

- CI/CDや共通スクリプトは、ルートの `.github/` 配下に集約し、テンプレート固有の要件のみ各テンプレート配下で管理する。
- テンプレート固有の設定（例：webはBiome, mobileはESLint+Prettier, テストフレームワーク等）は各テンプレートで最適化し、READMEや本ドキュメントに明記する。
- 共通化・最適化の方針や運用ルールは、テンプレート追加・変更時に必ず見直し、必要に応じて本ドキュメントを更新する。

### TypeScript設定の共通化方針

- `tsconfig.base.json`は全テンプレートで内容（compilerOptions等）を共通化し、型安全性・開発体験を統一する。
- テンプレート固有の要件（Next.js, React Native等）は`tsconfig.json`で個別に上書き・拡張する。
- 共通化内容や差分は本ドキュメントおよび各テンプレートのREADMEに明記する。

## 注意事項

- テンプレートの追加・削除は必ずPull Request（PR）で行い、レビュー・履歴管理を徹底してください。
- テンプレートごとに依存パッケージやセットアップ手順が異なる場合は、必ず個別にドキュメント化してください。
- テンプレート名やディレクトリ名は一意かつ分かりやすいものにしてください。

---

*このドキュメントは、AI-Toolboxプロジェクトのテンプレート運用・管理ルールを記録したものです。プロジェクトの成長に伴い、更新されることがあります。*
