## ワークフローパターン

### タスク開始時の分析
1. **メモリーバンク確認:**
   - 関連するメモリーバンクファイルを精査
   - コンテキストを完全に把握

2. **要求分析:**
   - ユーザーの要求を明確化
   - 既存コードとの整合性を確認

3. **アプローチ検討:**
   - 複数の実装方法を列挙
   - 評価基準に基づき最適な方法を選択

4. **計画立案:**
   - 必要な手順を明確化
   - 使用するツールを特定

### 実装と検証
1. **計画実行:**
   - ツールを適切に使用して実装
   - 各ステップで信頼度スコアを提示

2. **ドキュメント更新:**
   - 重要な変更をメモリーバンクに記録
   - `.clinerules` のルールを遵守

3. **動作確認:**
   - 変更が期待通りに機能するか検証
   - 関連機能への影響を評価

4. **コミット提案:**
   - 変更内容を要約
   - 適切なコミットメッセージを提案

## 実装時の判断基準

### 既存コード保護
1. **変更前確認:**
   - 既存コードの状態を記録
   - 変更の必要性を明確化

2. **影響評価:**
   - 変更範囲を特定
   - 既存機能の維持を確認

3. **段階的変更:**
   - 小さな変更から開始
   - 各変更後に動作確認

### 修正制限
1. **同一アプローチ:**
   - 最大2回まで試行
   - 3回目で方針転換

2. **同一エラー:**
   - 最大2回まで対応
   - 3回目で根本的解決策を検討

3. **複雑さ管理:**
   - 関数: 50行以内
   - ネスト: 最大3層
   - 依存関係: 1機能あたり最大3つ

4. **タイムボックス:**
   - アプローチ試行: 最大30分
   - エラー解決: 最大15分

### 中止判断基準
1. **複雑化の兆候:**
   - コード行数超過
   - ネスト深さ超過
   - 依存関係増加

2. **パフォーマンス問題:**
   - 実行時間2倍以上
   - メモリ使用量急増
   - レスポンス1秒超過

3. **エラー深刻度:**
   - 同一エラー3回以上
   - 原因不明
   - 他機能への影響